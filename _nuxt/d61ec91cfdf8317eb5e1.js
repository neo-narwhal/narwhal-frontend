(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{295:function(t,e,r){var content=r(348);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("2e476460",content,!0,{sourceMap:!1})},296:function(t,e,r){var content=r(354);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(16).default)("61863083",content,!0,{sourceMap:!1})},347:function(t,e,r){"use strict";var n=r(295);r.n(n).a},348:function(t,e,r){(t.exports=r(15)(!1)).push([t.i,".project-card[data-v-0fda3f60]{height:240px;margin:auto}@media(min-width:600px){.project-card[data-v-0fda3f60]{max-width:480px}}",""])},353:function(t,e,r){"use strict";var n=r(296);r.n(n).a},354:function(t,e,r){(t.exports=r(15)(!1)).push([t.i,".project-card[data-v-c79c2c26]{height:240px;margin:auto}@media(min-width:600px){.project-card[data-v-c79c2c26]{max-width:480px}}",""])},391:function(t,e,r){"use strict";r.r(e);r(14),r(8),r(10),r(7),r(6),r(72),r(37);var n=r(4),o=r(1),c=r(98),l=(r(34),r(27),r(346)),d=r.n(l);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var f,m={name:"ProjectCard",props:{name:{type:String,default:""},id:{type:Number,default:NaN},description:{type:String,default:""},isCustom:{type:Boolean,default:!1},imageTag:{type:String,default:""},cpu:{type:Number,default:1},memory:{type:Number,default:512},storage:{type:Number,default:5}},data:function(){return{feeRate:{cpu:1,memory:1e-4,storage:.001},isLoading:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(source,!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.d)(["user"]),{fee:function(){return+(+(this.feeRate.cpu*this.cpu).toFixed(12)+ +(this.feeRate.memory*this.memory).toFixed(12)+ +(this.feeRate.storage*this.storage).toFixed(12)).toFixed(12)}}),mounted:function(){new d.a("#btn-copy-".concat(this.name))},methods:{deleteProject:(f=Object(n.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isLoading=!0,t.next=3,this.$api.deleteProjectById(e);case 3:this.$emit("delete");case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})}},y=(r(347),r(36)),h=r(50),j=r.n(h),_=r(267),x=r(309),P=r(277),w=r(385),C=r(308),O=r(386),k=r(108),V=r(26),L=r(387),component=Object(y.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[r("v-card",{staticClass:"project-card",attrs:{elevation:n?12:2}},[t.isLoading?r("div",{staticClass:"fill-parent d-flex justify-center align-center"},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("div",{staticClass:"headline",domProps:{textContent:t._s(t.name)}})]),t._v(" "),r("v-card-text",[r("v-overlay",{attrs:{"z-index":"1",absolute:"",opacity:.9},model:{value:n,callback:function(t){n=t},expression:"hover"}},[r("div",{staticClass:"fill-parent d-flex justify-center align-center"},[r("v-card",{staticClass:"pa-3",attrs:{dark:"",width:"270"}},[r("div",{staticClass:"mb-3 grey--text"},[t._v("\n                專案存取 URL\n              ")]),t._v(" "),r("v-card",{attrs:{flat:"",color:"#222222",width:"100%"}},[r("v-card-text",{staticClass:"py-0"},[r("div",{staticClass:"py-4",staticStyle:{"white-space":"nowrap",overflow:"auto","text-overflow":"clip"}},[t._v("\n                    "+t._s("http://"+t.imageTag.split("/").pop().split(":").shift()+".wasay.site")+"\n                  ")])])],1),t._v(" "),r("div",{staticClass:"pt-5 d-flex justify-center"},[r("v-tooltip",{attrs:{bottom:"",color:"grey darken-4"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{id:"btn-copy-"+t.name,"data-clipboard-text":"http://"+t.imageTag.split("/").pop().split(":").shift()+".wasay.site",icon:""}},n),[r("v-icon",[t._v("mdi-content-copy")])],1)]}}],null,!0)},[t._v(" "),r("span",[t._v("複製 URL")])]),t._v(" "),r("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"https://narwhal.ntut.club/api/container/"+t.id}},[r("v-btn",t._g({staticClass:"mx-7",attrs:{icon:""}},n),[r("v-icon",[t._v("mdi-package-down")])],1)],1)]}}],null,!0)},[t._v(" "),r("span",[t._v("打包容器")])]),t._v(" "),r("v-tooltip",{attrs:{bottom:"",color:"primary"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({staticClass:"mx-7",attrs:{icon:""},on:{click:function(e){return t.$router.push("/projects/edit/"+t.id)}}},n),[r("v-icon",[t._v("mdi-pencil")])],1)]}}],null,!0)},[t._v(" "),r("span",[t._v("編輯專案")])]),t._v(" "),r("v-tooltip",{attrs:{bottom:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[r("v-btn",t._g({attrs:{icon:""},on:{click:function(e){return t.deleteProject(t.id)}}},n),[r("v-icon",[t._v("mdi-delete")])],1)]}}],null,!0)},[t._v(" "),r("span",[t._v("刪除專案")])])],1)],1)],1)]),t._v(" "),r("div",{staticClass:"subtitle-1 mb-2",staticStyle:{"white-space":"nowrap",overflow:"auto","text-overflow":"clip"},domProps:{textContent:t._s(t.description||"無")}}),t._v(" "),r("div",{staticClass:"caption mb-2",domProps:{textContent:t._s("vCPU： "+t.cpu+" 顆")}}),t._v(" "),r("div",{staticClass:"caption mb-2",domProps:{textContent:t._s("RAM："+t.memory+" MB")}}),t._v(" "),r("div",{staticClass:"caption mb-2",domProps:{textContent:t._s("儲存空間："+t.storage+" GB")}}),t._v(" "),r("div",{staticClass:"caption",domProps:{textContent:t._s("費率$："+t.fee+" 台幣/時")}})],1)]],2)]}}])})}),[],!1,null,"0fda3f60",null),S=component.exports;j()(component,{VBtn:_.a,VCard:x.a,VCardText:P.b,VHover:w.a,VIcon:C.a,VOverlay:O.a,VProgressCircular:k.a,VToolbar:V.a,VTooltip:L.a});var R={name:"ProjectCard"},$=(r(353),Object(y.a)(R,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var n=e.hover;return[r("v-card",{staticClass:"project-card",attrs:{elevation:n?12:2,link:"",nuxt:"",to:"/projects/create"}},[r("div",{staticClass:"fill-parent d-flex flex-column justify-center align-center"},[r("v-icon",{class:{"primary--text":n},attrs:{size:"56"}},[t._v("\n        mdi-plus\n      ")]),t._v(" "),r("span",{class:{"primary--text":n}},[t._v("新建專案")])],1)])]}}])})}),[],!1,null,"c79c2c26",null)),B=$.exports;j()($,{VCard:x.a,VHover:w.a,VIcon:C.a});var D={name:"ProjectList",components:{ProjectCard:S,ProjectCreateButtonCard:B},props:{isLoading:{type:Boolean,default:!1},projects:{type:Array,required:!0,default:function(){return[]}}}},I=r(388),E=r(389),T=Object(y.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?r("div",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"300px"}},[r("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):r("v-row",{staticClass:"px-3"},[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("ProjectCreateButtonCard")],1),t._v(" "),t._l(t.projects,(function(e,n){return r("v-col",{key:"project-card-col-"+n,attrs:{cols:"12",sm:"6",md:"4"}},[r("ProjectCard",t._b({key:"project-card-"+e.name,on:{delete:function(e){return t.$emit("refresh")}}},"ProjectCard",e,!1))],1)}))],2)}),[],!1,null,null,null),N=T.exports;function F(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}j()(T,{VCol:I.a,VProgressCircular:k.a,VRow:E.a});var M,U,z={name:"ProjectsPage",middleware:"isTokenValid",components:{ProjectList:N},data:function(){return{projects:[],isLoadingProjects:!1}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?F(source,!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):F(source).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.c)(["isLoggedIn"])),mounted:(U=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadProjects();case 2:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)}),methods:{loadProjects:(M=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,o,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoggedIn){t.next=2;break}return t.abrupt("return");case 2:return this.isLoadingProjects=!e&&!0,t.next=5,this.$api.getProjectIds();case 5:return r=t.sent,t.next=8,Promise.all(r.map(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.$api.getProjectById(e);case 3:return r=t.sent,t.abrupt("return",r);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 8:t.t0=function(a){return!!a},o=t.sent.filter(t.t0),this.isLoadingProjects=!e&&!1,this.projects=o;case 12:case"end":return t.stop()}}),t,this)}))),function(t){return M.apply(this,arguments)})}},A=r(317),H=Object(y.a)(z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.$store.getters.isLoggedIn?r("v-card",{staticClass:"page-container my-3"},[r("v-card-title",{staticClass:"headline font-weight-bold py-5 primary--text"},[r("v-icon",{attrs:{color:"primary"}},[t._v("\n      mdi-format-list-bulleted\n    ")]),t._v("專案列表\n  ")],1),t._v(" "),r("v-divider"),t._v(" "),r("ProjectList",{attrs:{"is-loading":t.isLoadingProjects,projects:t.projects},on:{refresh:function(e){return t.loadProjects(!0)}}})],1):t._e()}),[],!1,null,null,null);e.default=H.exports;j()(H,{VCard:x.a,VCardTitle:P.c,VDivider:A.a,VIcon:C.a})}}]);