(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{336:function(e,t,n){var content=n(337);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(16).default)("63c9496b",content,!0,{sourceMap:!1})},337:function(e,t,n){(e.exports=n(15)(!1)).push([e.i,".v-snack{align-items:center;color:#fff;display:flex;font-size:14px;left:8px;pointer-events:none;position:fixed;right:8px;text-align:left;transition-duration:.15s;transition-timing-function:cubic-bezier(0,0,.2,1);z-index:1000}.v-snack--absolute{position:absolute}.v-snack--top{top:8px}.v-snack--bottom{bottom:8px}.v-snack__wrapper{align-items:center;background-color:#323232;border-radius:4px;display:flex;margin:0 auto;pointer-events:auto;transition:inherit;transition-property:opacity,transform;min-width:100%;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.v-snack__content{align-items:center;display:flex;min-height:48px;justify-content:space-between;overflow:hidden;padding:8px 16px;width:100%}.v-snack__content .v-btn.v-btn{color:#fff;flex:0 0 auto;height:auto;margin:0 -8px 0 24px;min-width:auto;padding:8px;width:auto}.v-snack__content .v-btn.v-btn__content{margin:-2px}.v-application--is-rtl .v-snack__content .v-btn.v-btn{margin:0 24px 0 -8px}.v-snack__content .v-btn.v-btn:before{display:none}.v-snack--multi-line .v-snack__content{height:auto;min-height:68px}.v-snack--vertical .v-snack__content{align-items:stretch;flex-direction:column;height:auto;padding:16px 16px 8px}.v-snack--vertical .v-snack__content .v-btn.v-btn{align-self:flex-end;justify-self:flex-end;margin-left:0;margin-top:18px}.v-snack--vertical .v-snack__content .v-btn__content{flex:0 0 auto;margin:0}@media only screen and (min-width:600px){.v-snack__wrapper{min-width:344px;max-width:672px}.v-snack--left .v-snack__wrapper{margin-left:0}.v-snack--right .v-snack__wrapper{margin-right:0}.v-snack__content .v-btn:first-of-type{margin-left:42px}.v-application--is-rtl .v-snack__content .v-btn:first-of-type{margin-left:0;margin-right:42px}}.v-snack-transition-enter .v-snack__wrapper{transform:scale(.8)}.v-snack-transition-enter .v-snack__wrapper,.v-snack-transition-leave-to .v-snack__wrapper{opacity:0}",""])},392:function(e,t,n){"use strict";n.r(t);n(33),n(14),n(8),n(7),n(6),n(10),n(37);var r=n(4),o=n(1),c=n(98);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var v,f=function(input){return!!input||"必填"},d=function(input,e){return input&&input.length>=e||"長度需大於等於 ".concat(e)},m=function(input,e){return input&&input.length<=e||"長度需小於等於 ".concat(e)},h=function(input){return/^[a-zA-Z0-9]*$/.test(input)||"僅允許英文字母與數字"},k=function(input){return/\S+@\S+\.\S+/.test(input)||"不正確的信箱格式"},w={name:"Login",data:function(){var e=this;return{valid:null,inputs:{email:{value:"",errorMessages:[],rules:[function(){return f(e.inputs.email.value)},function(){return k(e.inputs.email.value)}]},password:{value:"",errorMessages:[],rules:[function(){return f(e.inputs.password.value)},function(){return d(e.inputs.password.value,6)},function(){return m(e.inputs.password.value,20)},function(){return h(e.inputs.password.value)}]}},passwordVisible:!1,isDataTransferring:!1}},computed:{canSubmit:function(){return!this.isDataTransferring&&this.valid}},watch:{isDataTransferring:function(e){this.$emit("change-status",e)}},methods:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(source,!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(source).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(c.b)(["setToken","setUser"]),{submit:(v=Object(r.a)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs.form.validate()&&this.canSubmit){e.next=2;break}return e.abrupt("return");case 2:return this.isDataTransferring=!0,e.prev=3,e.next=6,this.$api.login({email:this.inputs.email.value,password:this.inputs.password.value});case 6:return t=e.sent,this.setToken(t),this.$api.injectPrivateAPI(t),e.next=11,this.$api.getUserData();case 11:n=e.sent,this.setUser(n),this.$router.replace("/projects"),this.$refs.form.reset(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0),e.t0.response?401===e.t0.response.status?(this.inputs.email.errorMessages.push("信箱或密碼錯誤"),this.inputs.password.errorMessages.push("信箱或密碼錯誤")):(this.inputs.email.errorMessages.push("未知錯誤"),this.inputs.password.errorMessages.push("未知錯誤")):(this.inputs.email.errorMessages.push("網路錯誤"),this.inputs.password.errorMessages.push("網路錯誤"));case 21:this.isDataTransferring=!1;case 22:case"end":return e.stop()}}),e,this,[[3,17]])}))),function(){return v.apply(this,arguments)})})},x=n(36),y=n(50),_=n.n(y),T=n(306),M=n(267),O=n(383),D=n(160),$=n(379),component=Object(x.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-8 pb-6"},[n("div",{staticClass:"text-center"},[n("v-avatar",{attrs:{size:"128px"}},[n("v-img",{attrs:{src:"/images/narwhal.png"}})],1)],1),e._v(" "),n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"my-2",attrs:{label:"信箱","prepend-inner-icon":"mdi-email",disabled:e.isDataTransferring,rules:e.inputs.email.rules,"error-messages":e.inputs.email.errorMessages},on:{input:function(t){e.inputs.email.errorMessages=[]},focus:function(t){e.inputs.email.errorMessages=[]},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.inputs.email.value,callback:function(t){e.$set(e.inputs.email,"value",t)},expression:"inputs.email.value"}}),e._v(" "),n("v-text-field",{staticClass:"my-2",attrs:{counter:"20",label:"密碼","prepend-inner-icon":"mdi-lock",rules:e.inputs.password.rules,"error-messages":e.inputs.password.errorMessages,disabled:e.isDataTransferring,"append-icon":e.passwordVisible?"mdi-eye":"mdi-eye-off",type:e.passwordVisible?"text":"password"},on:{"click:append":function(t){e.passwordVisible=!e.passwordVisible},input:function(t){e.inputs.password.errorMessages=[]},focus:function(t){e.inputs.password.errorMessages=[]},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.inputs.password.value,callback:function(t){e.$set(e.inputs.password,"value",t)},expression:"inputs.password.value"}}),e._v(" "),n("v-btn",{staticClass:"mt-2",attrs:{loading:e.isDataTransferring,disabled:!e.canSubmit,color:"primary",block:""},on:{click:e.submit}},[e._v("\n      登入\n    ")])],1)],1)}),[],!1,null,"70491684",null),j=component.exports;_()(component,{VAvatar:T.a,VBtn:M.a,VForm:O.a,VImg:D.a,VTextField:$.a});var C=function(input){return!!input||"必填"},V=function(input,e){return input&&input.length>=e||"長度需大於等於 ".concat(e)},S=function(input,e){return input&&input.length<=e||"長度需小於等於 ".concat(e)},P=function(input){return/^[a-zA-Z0-9]*$/.test(input)||"僅允許英文字母與數字"},R=function(input){return/\S+@\S+\.\S+/.test(input)||"不正確的信箱格式"},A={name:"Register",data:function(){var e=this;return{valid:null,inputs:{email:{value:"",errorMessages:[],rules:[function(){return C(e.inputs.email.value)},function(){return R(e.inputs.email.value)}]},username:{value:"",errorMessages:[],rules:[function(){return C(e.inputs.username.value)},function(){return V(e.inputs.username.value,6)},function(){return S(e.inputs.username.value,20)},function(){return P(e.inputs.username.value)}]},password:{value:"",errorMessages:[],rules:[function(){return C(e.inputs.password.value)},function(){return V(e.inputs.password.value,6)},function(){return S(e.inputs.password.value,20)},function(){return P(e.inputs.password.value)}]}},passwordVisible:!1,isDataTransferring:!1}},computed:{canSubmit:function(){return!this.isDataTransferring&&this.valid}},watch:{isDataTransferring:function(e){this.$emit("change-status",e)}},methods:{submit:function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$refs.form.validate()&&this.canSubmit){e.next=2;break}return e.abrupt("return");case 2:return this.isDataTransferring=!0,e.prev=3,e.next=6,this.$api.register({email:this.inputs.email.value,username:this.inputs.username.value.toLowerCase(),password:this.inputs.password.value});case 6:this.$emit("registered"),this.$refs.form.reset(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),409===e.t0.response.status?(this.inputs.email.errorMessages.push("信箱或使用者名稱已被註冊過"),this.inputs.username.errorMessages.push("信箱或使用者名稱已被註冊過")):(this.inputs.email.errorMessages.push("未知錯誤"),this.inputs.username.errorMessages.push("未知錯誤"),this.inputs.password.errorMessages.push("未知錯誤"));case 14:this.isDataTransferring=!1;case 15:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()}},E=Object(x.a)(A,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-8 pb-6"},[n("div",{staticClass:"text-center"},[n("v-avatar",{attrs:{size:"128px"}},[n("v-img",{attrs:{src:"/images/narwhal.png"}})],1)],1),e._v(" "),n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{staticClass:"my-2",attrs:{label:"信箱","prepend-inner-icon":"mdi-email",disabled:e.isDataTransferring,rules:e.inputs.email.rules,"error-messages":e.inputs.email.errorMessages},on:{input:function(t){e.inputs.email.errorMessages=[]},focus:function(t){e.inputs.email.errorMessages=[]},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.inputs.email.value,callback:function(t){e.$set(e.inputs.email,"value",t)},expression:"inputs.email.value"}}),e._v(" "),n("v-text-field",{staticClass:"my-2",attrs:{counter:"20",label:"使用者名稱","prepend-inner-icon":"mdi-account",disabled:e.isDataTransferring,rules:e.inputs.username.rules,"error-messages":e.inputs.username.errorMessages},on:{input:function(t){e.inputs.username.errorMessages=[]},focus:function(t){e.inputs.username.errorMessages=[]},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.inputs.username.value,callback:function(t){e.$set(e.inputs.username,"value",t)},expression:"inputs.username.value"}}),e._v(" "),n("v-text-field",{staticClass:"my-2",attrs:{counter:"20",label:"密碼","prepend-inner-icon":"mdi-lock",rules:e.inputs.password.rules,"error-messages":e.inputs.password.errorMessages,disabled:e.isDataTransferring,"append-icon":e.passwordVisible?"mdi-eye":"mdi-eye-off",type:e.passwordVisible?"text":"password"},on:{"click:append":function(t){e.passwordVisible=!e.passwordVisible},input:function(t){e.inputs.password.errorMessages=[]},focus:function(t){e.inputs.password.errorMessages=[]},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)}},model:{value:e.inputs.password.value,callback:function(t){e.$set(e.inputs.password,"value",t)},expression:"inputs.password.value"}}),e._v(" "),n("v-btn",{staticClass:"mt-2",attrs:{loading:e.isDataTransferring,disabled:!e.canSubmit,color:"primary",block:""},on:{click:e.submit}},[e._v("\n      註冊\n    ")])],1)],1)}),[],!1,null,null,null),z=E.exports;_()(E,{VAvatar:T.a,VBtn:M.a,VForm:O.a,VImg:D.a,VTextField:$.a});var L={name:"AuthPage",layout:"guest",components:{Login:j,Register:z},data:function(){return{currentTab:"tab-login",isDataTransferring:!1,showRegisteredSnackbar:!1}},created:function(){this.$store.getters.isLoggedIn&&this.$router.replace("/projects")},methods:{registered:function(){this.showRegisteredSnackbar=!0,this.currentTab="tab-login"}}},B=n(309),I=(n(27),n(336),n(70)),F=n(71),U=n(75),J=n(19),Z=n(5),N=Object(J.a)(I.a,F.a,Object(U.b)(["absolute","top","bottom","left","right"])).extend({name:"v-snackbar",props:{multiLine:Boolean,timeout:{type:Number,default:6e3},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--active":this.isActive,"v-snack--absolute":this.absolute,"v-snack--bottom":this.bottom||!this.top,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--top":this.top,"v-snack--vertical":this.vertical}}},watch:{isActive:function(){this.setTimeout()}},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(Z.d)("auto-height",this)},mounted:function(){this.setTimeout()},methods:{setTimeout:function(){var e=this;window.clearTimeout(this.activeTimeout),this.isActive&&this.timeout&&(this.activeTimeout=window.setTimeout((function(){e.isActive=!1}),this.timeout))}},render:function(e){return e("transition",{attrs:{name:"v-snack-transition"}},[this.isActive&&e("div",{staticClass:"v-snack",class:this.classes,on:this.$listeners},[e("div",this.setBackgroundColor(this.color,{staticClass:"v-snack__wrapper"}),[e("div",{staticClass:"v-snack__content"},this.$slots.default)])])])}}),G=n(384),H=n(397),K=n(396),Q=Object(x.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill-parent d-flex justify-center align-center"},[n("v-card",{attrs:{"max-width":"300"}},[n("v-tabs",{attrs:{"fixed-tabs":""},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[n("v-tab",{key:"login",staticClass:"font-weight-black",attrs:{disabled:e.isDataTransferring,href:"#tab-login"}},[e._v("\n        登入\n      ")]),e._v(" "),n("v-tab",{key:"register",staticClass:"font-weight-black",attrs:{disabled:e.isDataTransferring,href:"#tab-register"}},[e._v("\n        註冊\n      ")]),e._v(" "),n("v-tab-item",{key:"login",attrs:{value:"tab-login"}},[n("Login",{on:{"change-status":function(t){e.isDataTransferring=t}}})],1),e._v(" "),n("v-tab-item",{key:"register",attrs:{value:"tab-register"}},[n("Register",{on:{"change-status":function(t){e.isDataTransferring=t},registered:e.registered}})],1)],1)],1),e._v(" "),n("v-snackbar",{attrs:{timeout:3e3,color:"primary",top:"",right:""},model:{value:e.showRegisteredSnackbar,callback:function(t){e.showRegisteredSnackbar=t},expression:"showRegisteredSnackbar"}},[e._v("\n    註冊成功！\n  ")])],1)}),[],!1,null,null,null);t.default=Q.exports;_()(Q,{VCard:B.a,VSnackbar:N,VTab:G.a,VTabItem:H.a,VTabs:K.a})}}]);